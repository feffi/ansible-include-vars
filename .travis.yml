---
language: objective-c

cache: pip

os:
  - osx

osx_image: xcode9

install:
    - sudo -H easy_install pip
    - sudo -H pip install -I ansible==2.3.2.0
    - mkdir -p /tmp/roles
    - "{ echo '[defaults]'; echo 'roles_path = ../:/tmp/roles'; } >> ansible.cfg"
    - mkdir -p /tmp/.macos-bootstrap/
    - "{ echo 'secret_param: true'; echo 'username: \"foo\"'; echo 'hash_behaviour=merge'; } >> /tmp/.macos-bootstrap/secrets.yml"

script:
  - "ansible-playbook -i tests/inventory tests/travis.yml --syntax-check"
  - "ansible-playbook -i tests/inventory tests/travis.yml --connection=local"
